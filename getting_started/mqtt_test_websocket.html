<html>
<head>
<title>JavaScript MQTT Web Socket</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
var mqtt;
var reconnectTime = 2000;
var host = "18.217.227.236";
var port = 9010;

function onConnect(){
console.log("Connected ");
message = new Paho.MQTT.Message("Hello Weeb Socket");
message.destinationName="laweatherday";
mqtt.send(message);
}


function onFail(res){
console.log("Failed to connect "+ res.errorMessage);
}

function MQTTconnect(){
console.log("Connecting to "+ host + " port " + port);
mqtt = new Paho.MQTT.Client(host,port,"Websocket");
var options = {timeout: 30, userName:"CCI", password:"ddqqh6", onSuccess: onConnect, onFailure: onFail,};
mqtt.connect(options);
}
</script>
</head>
<body>
<script>
MQTTconnect();
</script>
</body>
</html>