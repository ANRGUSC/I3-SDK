<html>
<head>
<title>JavaScript MQTT Web Socket</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
var mqtt;
var reconnectTime = 2000;
var host = "Default";
var port = 9010;
var topic = "Default";
var subscriber = "Default";
var password = "Default";

function onConnect(){
console.log("Connected ");
message = new Paho.MQTT.Message("Hello Weeb Socket");
message.destinationName=topic;
mqtt.send(message);
}


function onFail(res){
console.log("Failed to connect "+ res.errorMessage);
}

function MQTTconnect(){
if(host == "Default" || topic == "Default" || subscriber == "Default" || password == "Default"){
    window.alert("ERROR: Check host, topic, subscriber and password values");
    console.error("Default values set needs to be changed");
    console.error("Check host, topic, subscriber, password fields");
    console.log("The subscriber is the username that was used to purchase the product");
    console.log("The topic is the product which is purchased from the I3 Data market place");
    console.log("The password is the system generated password when the product is purchased");
    console.log("Also remember that port should always be type Number and not String type");
}
else {
    console.log("Connecting to "+ host + " port " + port);
    mqtt = new Paho.MQTT.Client(host,port,"Websocket");
    var options = {timeout: 30, userName: subscriber, password: password, onSuccess: onConnect, onFailure: onFail,};
    mqtt.connect(options);
}
}
</script>
</head>
<body>
<script>
MQTTconnect();
</script>
</body>
</html>